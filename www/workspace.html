<html>
<head>
	<META name="keywords" content="hudson, continuoous integration, build">
</head>
<body><div class=app>
<h1>Building Hudson</h1>

<p>
  To build Hudson so that you can make modifications, follow the steps below:

<pre>
// check out the workspace
$ cvs -d:pserver:guets@cvs.dev.java.net:/cvs co hudson/hudson
$ cd hudson
// use maven2 for build
$ mvn install
</pre>

<p>
  The first build will take a while, because it has to download million jars from all over the world.
  But if it succeeds with <tt>BUILD SUCCESSFUL</tt> at the end, you are good to go.

<h3>Configure work environment</h3>
<p>
  If you plan to work on the Hudson code, you should generate your IDE project files:
<pre>
// if you are using IntelliJ
$ mvn -DdownloadSources=true idea:idea
// if you are using Eclipse
$ mvn -DdownloadSources=true eclipse:eclipse
// TODO: find out how to do this for NetBeans
</pre>

<h3>Debugging Hudson</h3>
<p>
  <a href="http://jetty.mortbay.org/maven-plugin/">Maven Jetty plugin</a> offers a convenient debugging environment. Do the following to run Hudson under the debugger, and open <tt>http://localhost:8080/</tt> in your browser:
<pre>
$ cd main/war
$ export MAVEN_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,address=8000"
$ mvn jetty:run
</pre>
<p>
  This will launch maven with the debugger port for 8000. You can connect to this port from your IDE by using the remote debug feature. Once this starts running, keep it running. Jetty will pick up all the changes automatically.
<ol>
  <li>When you make changes to view files in <tt>core/src/main/resources</tt>, just hit F5 in your browser to see the changes.
  <li>When you make changes to static resources in <tt>war/resources</tt>, just hit F5 in your browser to see the changes.
  <li>When you change Java source files. Compile them in your IDE and Jetty should pick that up. You don't need to run <tt>mvn</tt> at all for this.
</ol>

<h3>Other Tips</h3>
<ol>
	<li>Consider running Maven like <tt>mvn -o ...</tt> to avoid hitting repositories every time. It's just slow.
	<li>You can activate the "debug" profile like <tt>mvn -P debug ...</tt> to further speed up the build.
</ol>

</div></body>
</html>
