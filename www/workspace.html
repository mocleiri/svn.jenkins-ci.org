<html>
<head>
	<META name="keywords" content="hudson, continuous integration, build">
	<style>
    pre {
      border: 1px dashed black;
      padding: 0.5em;
    }
	</style>
</head>
<body><div class=app>
<h1>Building Hudson</h1>

<p>
  To build Hudson so that you can make modifications, follow the steps below:

<pre>
// check out the workspace
$ cvs -d:pserver:guest@cvs.dev.java.net:/cvs co hudson/hudson
$ cd hudson
// use maven2 for build
$ mvn install
</pre>

<p>
  The first build will take a while, because it has to download million jars from all over the world.
  But if it succeeds with <tt>BUILD SUCCESSFUL</tt> at the end, you are good to go.

<p>
  At the end you should have <tt>hudson/main/war/target/hudson.war</tt>, which is the hudson you just built.

<h3>Configure work environment</h3>
<p>
  To work on the Hudson code productively, you should generate your IDE project files:
<pre>
// if you are using IntelliJ
$ mvn -DdownloadSources=true idea:idea
// if you are using Eclipse
$ mvn -DdownloadSources=true eclipse:eclipse
</pre>
<p>
  NetBeans users should consider using <a href="http://mevenide.codehaus.org/m2-site/">this NetBeans module</a> for working with Hudson.
<p>
	Due to <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=163807">a bug in Eclipse</a>, Eclipse users will need to remove <tt>src/main/resources</tt> from the source folder list after projects are imported to the workspace. See <a href="https://hudson.dev.java.net/servlets/ReadMsg?list=users&msgNo=337">this e-mail thread</a> for more details.

<h3>Debugging Hudson</h3>
<p>
  <a href="http://jetty.mortbay.org/maven-plugin/">Maven Jetty plugin</a> offers a convenient debugging environment. Do the following to run Hudson under the debugger, and open <tt>http://localhost:8080/</tt> in your browser:
<pre>
$ cd main/war
$ export MAVEN_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,address=8000"
$ mvn -o jetty:run
</pre>
<p>
  This will launch maven with the debugger port for 8000. You can connect to this port from your IDE by using the remote debug feature. Once this starts running, keep it running. Jetty will pick up all the changes automatically.
<ol>
  <li>When you make changes to view files in <tt>core/src/main/resources</tt>, just hit F5 in your browser to see the changes.
  <li>When you make changes to static resources in <tt>war/resources</tt>, just hit F5 in your browser to see the changes.
  <li>When you change Java source files. Compile them in your IDE and Jetty should pick that up. You don't need to run <tt>mvn</tt> at all for this.
</ol>

<h3>Other Tips</h3>
<ol>
	<li>Consider running Maven like <tt>mvn -o ...</tt> to avoid hitting repositories every time. This will make various operations considerably faster.
	<li>When Maven complains about something, try "cd $HUDSON/main; mvn clean install".
</ol>

</div></body>
</html>
