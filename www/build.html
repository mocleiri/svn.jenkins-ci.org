<html>
<head>
	<style>
		dt {
			font-weight: bold;
			margin-left: 1em;
		}
		pre {
			background-color: lightgray;
			padding: 0.5em;
			margin-left: 2em;
			margin-right: 2em;
		}
	</style>
	<META name="keywords" content="hudson, continuous integration, build">
</head>
<body><div class=app>
<h1>Building a Software Project in Hudson</h1>

<p>
	Hudson can be used to perform the "official build" for a software project. This document describes how you'd typically set that up.

<h3>Setting up the project</h3>
<p>
	First you need to create a new project in Hudson, and configure it.
	We expect the project to be controlled in CVS or Subversion and it has some sort of build script (ant/maven/make, etc.)
	You configure the project by telling Hudson where to check out the source code, how to build, and which produced artifacts to archive.
<p>
	Once this is done, manually schedule a build to see if your setting is correct. If a build is successful, you'll see green icons on the left pane.


<h3>Configure automatic build</h3>
<p>
	Builds in Hudson can be triggered periodically (on a schedule, specified
	in configuration),
	or when source changes in the project have been detected,
	or they can be automatically triggered by requesting the URL:
	<pre>
	 http://YOURHOST/hudson/job/PROJECTNAME/build</pre>
	This allows you to hook Hudson builds into a variety of the set up.

<p>
<b>NOTE:</b> Since Hudson 1.65 the URL above will only work if Hudson security
option is disabled. If you'd like to trigger builds from scripts when Hudson security
is enabled, select "Trigger builds remotely" option in your project configuration,
and provide an authorization token there. Now you can trigger your builds via the
following URL:
<pre>
http://YOURHOST/hudson/job/PROJECTNAME/build?token=YOUR_TOKEN_HERE
</pre>
For simplicity purposes, we'll use the first URL for the rest of the document, but
everything is equally applicable to the second URL. 
</p>

<h4>Periodic Builds</h4>
<p>
	To perform builds periodically (for example every night in 3am), use <tt>cron</tt> to run the following program:
<pre>
wget -o /dev/null http://YOURHOST/hudson/job/PROJECTNAME/build
</pre>
In the recent Hudson versions it's possible to enable cron-like scheduling right
from the Hudson's GUI, see "Build Triggers" section in your project's
configuration.

<h4>Builds by e-mail (sendmail)</h4>
<p>
	If you have the root account of your system and you are using sendmail, I found it the easiest to tweak <tt>/etc/aliases</tt> and add the following entry:
<pre>
hudson-foo: "|/bin/wget -o /dev/null http://YOURHOST/hudson/job/PROJECTNAME/build"
</pre>
<p>
	and then run "newaliases" command to let sendmail know of the change. Whenever someone sends an e-mail to "hudson-foo@yoursystem", this will trigger a new build. See <a href="http://www.developer.com/open/article.php/615931">this</a> for more details about configuring sendmail.

<h4>Builds by e-mail (qmail)</h4>
<p>
	With qmail, you can write <tt>/var/qmail/alias/.qmail-hudson</tt> as follows:
<pre>
|/bin/wget -o /dev/null http://YOURHOST/hudson/job/PROJECTNAME/build"
</pre>


<h4>Builds by changes in CVS</h4>
<p>
	To perform builds whenever someone makes a change in the repository, either invoke the above program from /CVSROOT/loginfo, or hook up CVS notification e-mails as explained above.
</p>
<p> Or, you could configure Hudson to poll your source control system periodically
    and start new builds when the changes have been detected.</p>
</div></body>
</html>
