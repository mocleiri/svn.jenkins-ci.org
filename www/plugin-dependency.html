<html>
<head>
  <style>
    dt {
      font-weight: bold;
      margin-left: 1em;
    }
  </style>
</head>
<body><div class=app>
<h1>Dependencies Among Plugins</h1>
<p>
A plugin can declare dependencies to other plugins. When plugin X depends on Y, X can see all the classes in Y, as well as Y's libraries and dependencies.

<p>
To declare a dependency, add the following entry to plugin <tt>pom.xml</tt>

<pre><xmp>
<dependency>
  <groupId>org.jvnet.hudson.plugins</groupId>
  <artifactId>javanet-uploader</artifactId>
  <version>1.5</version>
  <type>hpi</type>
  <scope>provided</scope>
</dependency>
</xmp></pre>

<p>
The groupId, artifactId, version needs to be changed according to what you want to depend on. The type indicates that this is a hudson plugin dependency, and the scope indicates that this dependency need not be packaged inside this plugin (rather, this plugin is supposed to just exist at runtime.)

<p>
Unfortunately, due to the way Maven works, and because hudson plugins are not ordinary jar files, any reference from X to classes in Y will be invisible; in essence, X can only refer to dependency jars of Y. Therefore, to refer to classes in another plugin, you'd have to split the code of Y as a separate jar file, like below:

<h4>Y-core pom.xml</h4>
<pre><xmp>
<project>
  ...
  <artifactId>y-core</artifactId>
  <packaging>jar</packaging>
  <name>Classes of Y</name>
  
  <dependencies>
    <dependency>
      <groupId>org.jvnet.hudson.main</groupId>
      <artifactId>hudson-core</artifactId>
      <version>1.85</version>
      <scope>provided</scope>
    </dependency>
    ...
  </dependencies>
  ...
</project>
</xmp></pre>

<h4>Y pom.xml</h4>
<pre><xmp>
<project>
  ...
  <artifactId>y</artifactId>
  <packaging>hpi</packaging>
  <name>Y plugin</name>

  <dependencies>
    <dependency>
      ...
      <artifactId>y-core</artifactId>
      ...
    </dependency>
    <dependency>
      <groupId>org.jvnet.hudson.main</groupId>
      <artifactId>hudson-war</artifactId>
      <type>war</type>
      <version>1.85</version>
      <scope>test</scope>
    </dependency>
    ...
  </dependencies>
  ...
</project></xmp></pre>

<h4>X pom.xml</h4>
<pre><xmp>
<project>
  ...
  <artifactId>x</artifactId>
  <packaging>hpi</packaging>
  <name>X plugin</name>

  <dependencies>
    <dependency>
      ...
      <artifactId>y</artifactId>
      <type>hpi</type>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.jvnet.hudson.main</groupId>
      <artifactId>hudson-war</artifactId>
      <type>war</type>
      <version>1.85</version>
      <scope>test</scope>
    </dependency>
    ...
  </dependencies>
  ...
</project></xmp></pre>

</div></body>
</html>
